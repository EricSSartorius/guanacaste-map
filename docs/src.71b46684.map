{"version":3,"sources":["src/config.js","src/components/popup.js","src/index.js"],"names":["MAP","style","zoom","center","ACCESS_TOKEN","LAYER_ID","SOURCE_LAYER","FLY_TO_ZOOM_LEVEL","ANIMATION_DURATION","TYPES","name","label","feature","properties","Estación","Image","description","link","config","DEFAULT_MAP","container","mapboxgl","accessToken","map","Map","Object","assign","window","exampleMap","createMarker","className","Marker","getMarkerElement","setLngLat","geometry","coordinates","addTo","createMarkers","features","markerElement","document","createElement","createLegendItem","div","span","labelSpan","symbolType","innerHTML","appendChild","getElementById","popup","Popup","showPopup","setHTML","on","flyTo","duration","e","setTimeout","getFeatures","querySourceFeatures","sourceLayer","filter","featureData"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ADAf,IAAMjB,MAAM;AACV;AACAC,SAAO,sDAFG;AAGVC,QAAM,IAHI;AAIVC,UAAQ,CAAC,CAAC,QAAF,EAAY,SAAZ;AAJE,CAAZ;;AAOA,IAAMC,eACJ,+FADF;;kBAGe;AACbC,YAAU,SADG;AAEbC,gBAAc,SAFD;AAGbC,qBAAmB,EAHN;AAIbC,sBAAoB,IAJP;AAKbR,UALa;AAMbI,4BANa;AAObK,SAAO,CACL;AACEC,UAAM,YADR;AAEEC,WAAO;AAFT,GADK,EAKL;AACED,UAAM,SADR;AAEEC,WAAO;AAFT,GALK;AAPM","file":"src.71b46684.map","sourceRoot":"..","sourcesContent":["const MAP = {\n  // for creating mapboxgl.Map(). container defaults to 'map'\n  style: 'mapbox://styles/guanacaste/cjj079axn0aqu2so55fx6ln2x',\n  zoom: 9.18,\n  center: [-85.49304, 10.891421]\n};\n\nconst ACCESS_TOKEN =\n  'pk.eyJ1IjoiZ3VhbmFjYXN0ZSIsImEiOiJjamowNzhuYnAwZXU2M2txczhsc21mbDVsIn0.amJMu3O1jfjcbg-B1qC7ww';\n\nexport default {\n  LAYER_ID: 'turismo',\n  SOURCE_LAYER: 'Turismo',\n  FLY_TO_ZOOM_LEVEL: 12,\n  ANIMATION_DURATION: 2000,\n  MAP,\n  ACCESS_TOKEN,\n  TYPES: [\n    {\n      name: 'biological',\n      label: 'Biological'\n    },\n    {\n      name: 'tourist',\n      label: 'Touristo'\n    }\n  ]\n};\n","export default feature =>\n  `<div class=\"popup-header\">\n    <h3>${feature.properties.Estación}</h3>\n    <div class=\"popup-image\">\n      <img\n        src=\"${feature.properties.Image}\"\n        alt=\"Image del Estación ${feature.properties.Estación}\"\n      />\n    </div>\n  </div>\n  <div class=\"popup-content\">\n    <div class=\"popup-description\">\n      <p>${feature.properties.description}</p>\n    </div>\n    <a\n      class=\"popup-button\"\n      href=\"${feature.properties.link}\"\n      target=\"_new\"\n      >\n      Más informacíon\n    </a>\n  </div>\n  `;\n","import config from './config';\nimport popupComponent from './components/popup';\n\nconst {\n  ACCESS_TOKEN,\n  MAP,\n  SOURCE_LAYER,\n  TYPES,\n  LAYER_ID,\n  FLY_TO_ZOOM_LEVEL,\n  ANIMATION_DURATION\n} = config;\n\nconst DEFAULT_MAP = {\n  container: 'map',\n  center: [-85.49304, 10.891421],\n  zoom: 9.18\n};\n\nmapboxgl.accessToken = ACCESS_TOKEN;\n\n// instantiate the map instance\nconst map = new mapboxgl.Map(\n  // Set defaults, allow the config to override\n  Object.assign(DEFAULT_MAP, MAP)\n);\n\nwindow.exampleMap = map;\n\n// MARKERS\n\nconst createMarker = (feature, className) =>\n  new mapboxgl.Marker(getMarkerElement(feature, className))\n    .setLngLat(feature.geometry.coordinates)\n    .addTo(map);\n\n// make a marker for each feature and add to the map\nconst createMarkers = (features, className) =>\n  features.map(feature => createMarker(feature, className));\n\n// Generate the marker element on the fly in the DOM, using createElement\nconst getMarkerElement = (feature, className) => {\n  // create a HTML element for each feature\n  const markerElement = document.createElement('div');\n  // append default marker classname to provided class name\n  markerElement.className = `marker ${className}`;\n\n  return markerElement;\n};\n\n// LEGEND ITEMS\n\nconst createLegendItem = symbolType => {\n  const div = document.createElement('div');\n  const span = document.createElement('span');\n  const labelSpan = document.createElement('span');\n  span.className = `marker ${symbolType.name}-marker`;\n  labelSpan.innerHTML = symbolType.label || 'No label specified';\n  div.appendChild(span);\n  div.appendChild(labelSpan);\n  document.getElementById('legend-items').appendChild(div);\n};\n\n// HANDLE POPUPS\n\nconst popup = new mapboxgl.Popup();\n\n// Create a mapboxgl.Popup from the default popup component.\nconst showPopup = feature => {\n  popup\n    .setLngLat(feature.geometry.coordinates)\n    .setHTML(popupComponent(feature))\n    .addTo(map);\n  popup.on('close', e => {\n    map.flyTo({\n      center: DEFAULT_MAP.center,\n      zoom: DEFAULT_MAP.zoom,\n      duration: ANIMATION_DURATION\n    });\n  });\n\n  return popup;\n};\n\n// HANDLE MAP EVENTS\n\nmap.on('click', LAYER_ID, e => {\n  const feature = e.features[0];\n  setTimeout(() => {\n    map.flyTo({\n      center: feature.geometry.coordinates,\n      zoom: FLY_TO_ZOOM_LEVEL,\n      duration: ANIMATION_DURATION\n    });\n    showPopup(feature);\n  }, 200);\n});\n// HANDLE MAP LOAD\n\n// Retrieve the source feature data from mapbox\nconst getFeatures = symbolType =>\n  map.querySourceFeatures('composite', {\n    sourceLayer: SOURCE_LAYER,\n    filter: ['==', 'symbol', symbolType]\n  });\n\n// When the map loads, generate the markers\nmap.on('load', () => {\n  const featureData =\n    TYPES &&\n    TYPES.map(symbolType => {\n      const features = getFeatures(symbolType.name);\n      createLegendItem(symbolType);\n\n      // get the feature featureData and then create markers\n      // return createMarkers(features, `${symbolType.name}-marker`);\n    });\n});\n"]}